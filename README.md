##  netology-10.01 

### Домашнее задание к занятию "10.01. Зачем и что нужно мониторить"


> 1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя платформу для 
> вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой осуществляется по протоколу 
> http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы выведите в мониторинг и почему?

##### *Ответ:*

У нас есть система: "БД + Web-сервер + СХД для отчетов". Следовательно нам нужно настроить мониторинг:
* на проверку состояния ПО (БД, web-сервер),
* на проверку состояния ОС, где запущенно это ПО
* на проверку аппаратной части, на которой это ПО и ОС крутятся.

* Проверка доступности БД.
* Мониторинг БД на предмет долгоработающих блокировок
* Нагрузка СPU, наличие свободного место на диске, использование оперативной памяти хоста, на котором запущено приложение, база данных.
* Доступность интерфейса приложения
* Время записи/чтения диска, покажет доступность дисковой подсистемы
* Если ПО работает в виде демона в ОС, то осуществлять проверку состояния запущенной программы (ps, systemctl status и т.д.)
* Количество открытых соединений с хостом /сервисом
* Если используются регламентые задачи, которые запускаются (через crontab, к примеру) - проверка их выполнения.
* Проверка учетных записей пользователей приложения.
* Проверка доступности сетевого соедниение между хостами, работающими в связке с сервисом (приложение и БД в данном случае)
* Мониторинг загрузки сетевого интерфейса.
* Доступность портов на хосте (telnet, ping)

----

> 2. Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPU la. Также он сказал, что хочет 
> понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы можете ему предложить?

##### *Ответ:*

CPU Load - нагруженность(задержки на комманд процесса) процессора (нагрузка на приложение)
inodes - загруженность файловой системы (нагрузка ПО на формирование отчетов:кол-во отчетов)
RAM -  загруженность оперативной памяти


* Время формирования отчета, можно разбить на несколько метрик : минимальное, среднее и максимальное время
* Можно заключить соглашение по дополнительным метрикам и SLA к ним.
* Количество ошибок при формировании отчетов, точнее количество отчетов с ошибокй, завершившихся неудачно 
* Доступность приложения в разрезе времени 

---

> 3. Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою очередь 
> хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации, чтобы разработчики 
> получали ошибки приложения?

##### *Ответ:*

Можно использовать open-source компоненты стека ELK. Предоставить разработчикам доступ в веб-интерфейс Kibana, чтобы они могли работать с данными. В результате получим: масштабируемость – кластер Elasticsearch (ES) расширяется «на лету», отказоустойчивость — в случае сбоя кластерных узлов данные не потеряются и гибкость поисковых запросов к нашим собранным данным.


---
> 4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. 
> Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. 
> Данный параметр не поднимается выше 70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?

##### *Ответ:*
* Коды ответов 300-399 - редиректы, так же нужно учитывать как успешные, т.к. они не являются по своей сути ошибками, особенно если это есть в сервисе.
* Так же коды 100-199 - информационные сообщения, которые также не являются ошибками.
* код 2** - можно использовать как проверку доступности сервиса, а не единственный признак работоспособности.

